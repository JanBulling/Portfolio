---
import { type CollectionEntry, getCollection } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import { site } from "@/contsts";
import { formatDate } from "@/lib/utils";

// Create the static pages for legal docs
export async function getStaticPaths() {
  const docs = await getCollection("legal");
  return docs.map((doc) => ({
    params: { slug: doc.slug },
    props: doc,
  }));
}

// Get the requested legal doc
type Props = CollectionEntry<"legal">;
const doc = Astro.props;
const { title, date } = doc.data;
const { Content } = await doc.render();
---

<Layout title={title} description={`${title} for ${site.title}`}>
  <div class='page-heading'>
    {title}
  </div>
  <p class='font-normal opacity-75'>
    Last updated: {formatDate(date)}
  </p>
  <article class='animate'>
    <Content />
  </article>
</Layout>
